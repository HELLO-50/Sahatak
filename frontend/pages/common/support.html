<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title-head">Support Page - Sahatak</title>
    
   <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='%230d47a1' d='m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523.942-.661 2.27.067 3.71L8 15.5l6.533-8.737c.728-1.44.59-2.768.067-3.71C13.486.878 10.4.28 8.717 2.01L8 2.748z'/></svg>">
    
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Arabic Font - Noto Sans Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!-- Dashboard CSS -->
    <link rel="stylesheet" href="../../assets/css/components/dashboard.css">
    <!-- Appointments CSS -->
    <link rel="stylesheet" href="../../assets/css/components/appointments.css">
    <!-- Video Consultation Dashboard CSS -->
    <link rel="stylesheet" href="../../assets/css/components/video-consultation-dashboard.css">
    <style>
        /* Unverified doctor states */
        .unverified-disabled {
            opacity: 0.5;
            cursor: not-allowed !important;
            pointer-events: none;
        }
        
        .verification-overlay {
            position: relative;
        }
        
        .verification-overlay::after {
            content: "ðŸ”’ Verification Required";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            color: #dc3545;
            border: 1px solid #dc3545;
            z-index: 10;
            display: none;
        }
        
        .unverified-disabled.verification-overlay::after {
            display: block;
        }
        
        .verification-notice {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }
        
        .verification-notice .notice-icon {
            color: #856404;
            font-size: 24px;
        }
        
        /* Video consultation button styling */
        .btn-complete-consultation {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .btn-complete-consultation:hover {
            background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }
        
        .btn-consultation-ended {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        /* Animation for removing appointments */
        @keyframes fadeOut {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.95);
            }
        }
        
        /* Pagination Styles */
        .pagination-controls {
            font-size: 14px;
        }
        
        .pagination-controls .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            border-radius: 0.25rem;
            transition: all 0.15s ease-in-out;
        }
        
        .pagination-controls .btn-outline-secondary:hover:not(:disabled) {
            background-color: #6c757d;
            border-color: #6c757d;
            color: white;
        }
        
        .pagination-controls .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .pagination-controls .d-flex.gap-1 > .btn {
            min-width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .pagination-controls .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }
        
        .pagination-controls .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }
        
        /* Page info styling */
        #activity-page-info, #appointments-page-info {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        /* Responsive pagination */
        @media (max-width: 768px) {
            .pagination-controls {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .pagination-controls .d-flex:first-child,
            .pagination-controls .d-flex:last-child {
                justify-content: center;
            }
            
            #activity-page-info, #appointments-page-info {
                text-align: center;
                margin-bottom: 0.5rem;
            }
        }
    </style>
</head>
<body data-protect="patient">
    <div class="dashboard-container">
        <div class="container-fluid" style="padding-bottom: 120px;">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="row align-items-center">
                    <!-- Profile Section - Left (Right in RTL) -->
                    <div class="col-lg-4">
                        <div class="profile-section">
                            <div class="user-avatar">
                                <i class="bi bi-person-fill"></i>
                            </div>
                            <div class="user-details">
                                <h5 class="mb-1" id="user-name">Loading...</h5>
                            </div>
                            <!-- Vertical Action Buttons -->
                            <div class="action-buttons">
                                <button class="btn btn-action" onclick="goBackToDashboard()" title="Back to Dashboard">
                                    <i class="bi bi-arrow-left"></i>
                                    <span id="btn-back">Back to Dashboard</span>
                                </button>
                                <button class="btn btn-action btn-logout" onclick="AuthGuard.logout()" title="Logout">
                                    <i class="bi bi-box-arrow-right"></i>
                                    <span id="btn-logout">Logout</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Page Title - Center -->
                    <div class="col-lg-4 text-center">
                        <h1 class="dashboard-title" id="page-title">Support Sahatak</h1>
                        <p class="dashboard-subtitle" id="page-subtitle">Technical Support</p>
                    </div>
                    
                    <!-- Controls - Right (Left in RTL) -->
                     <style>
                    /* light blue background for the services area, cards stay visually on top */
                    #services-section {
                        background-color: #e6f7ff; /* light blue */
                        padding: 1.5rem;
                        border-radius: 0.6rem;
                    }

                    /* ensure cards render above the background (so background never covers them) */
                    #services-section .card {
                        position: relative;
                        z-index: 1;
                        background-color: #fff; /* reinforce white card background */
                    }

                    /* give some extra spacing so the background doesn't touch viewport edges */
                    @media (min-width: 992px) {
                        #services-section { padding-left: 2rem; padding-right: 2rem; }
                    }
                </style>
            <!-- Support & Supervisor Messaging -->
            <section id="support-section" class="mt-4">
                <div class="row gy-4">
                    <!-- Report a Problem Card -->
                        <style>
                        /* make all cards in the support section have a light-blue background,
                            and ensure form fields inside those cards are white */
                        #support-section .card {
                          background-color: #e6f7ff;
                          border: 1px solid rgba(13,47,93,0.06);
                          box-shadow: 0 1px 2px rgba(13,47,93,0.04);
                        }

                        #support-section .card .card-body {
                          background: transparent;
                        }

                        /* form controls inside cards should be white for contrast */
                        #support-section .card .form-control,
                        #support-section .card .form-select,
                        #support-section .card textarea,
                        #support-section .card input[type="text"],
                        #support-section .card input[type="tel"],
                        #support-section .card input[type="file"] {
                          background-color: #ffffff;
                          border: 1px solid #dfe7ef;
                          box-shadow: none;
                        }

                        /* keep placeholder/text color readable */
                        #support-section .card .form-control::placeholder,
                        #support-section .card textarea::placeholder {
                          color: #6c757d;
                        }
                        </style>
                    <div class="col-lg-6">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title"><i class="bi bi-bug-fill me-2"></i>Report a Problem</h5>
                                <p class="text-muted small">Tell us about any issues you face while using the app. Our support team will review and respond.</p>

                                <div id="report-alert" class="alert d-none" role="alert"></div>

                                <form id="report-form" novalidate>
                                    <div class="mb-3">
                                        <label for="problem-subject" class="form-label">Subject</label>
                                        <input type="text" id="problem-subject" name="subject" class="form-control" required maxlength="120" placeholder="Short summary of the issue">
                                    </div>

                                    <div class="mb-3">
                                        <label for="problem-description" class="form-label">Description</label>
                                        <textarea id="problem-description" name="description" class="form-control" rows="6" required placeholder="Describe the steps to reproduce the issue, expected vs actual behavior, and any error messages."></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="problem-screenshot" class="form-label">Attachment (optional)</label>
                                        <input id="problem-screenshot" name="attachment" type="file" class="form-control" accept="image/*,.log,.txt,.pdf">
                                        <div class="form-text">Attach screenshots, logs, or a short recording (max 10MB).</div>
                                    </div>

                                    <div class="d-flex justify-content-end">
                                        <button type="submit" class="btn btn-medical">
                                            <i class="bi bi-send-fill me-1"></i> Send Report
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Message Supervisors Card -->
                    <div class="col-lg-6">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title"><i class="bi bi-envelope-fill me-2"></i>Message To Technical Support</h5>
                                <p class="text-muted small">Send a direct message to program supervisors for feedback, escalations or private concerns.</p>

                                <div id="supervisor-alert" class="alert d-none" role="alert"></div>
                                <form id="supervisor-form" novalidate>
                                    <div class="mb-3">
                                        <label for="supervisor-to" class="form-label">To (Supervisor)</label>
                                        <select id="supervisor-to" name="to" class="form-select" required>
                                            <option value="">Select a recipient</option>
                                            <option value="lead">Lead Supervisor</option>
                                            <option value="ops">Operations Manager</option>
                                            <option value="tech">Technical Supervisor</option>
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="supervisor-subject" class="form-label">Subject</label>
                                        <input id="supervisor-subject" name="subject" type="text" class="form-control" required maxlength="120" placeholder="Brief subject">
                                    </div>

                                    <div class="mb-3">
                                        <label for="supervisor-message" class="form-label">Message</label>
                                        <textarea id="supervisor-message" name="message" class="form-control" rows="6" required placeholder="Write your message to the supervisors..."></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="supervisor-phone" class="form-label">Contact (optional)</label>
                                        <input id="supervisor-phone" name="contact" type="tel" class="form-control" placeholder="Phone or email for a reply">
                                    </div>

                                    <div class="d-flex justify-content-end">
                                        <button type="submit" class="btn btn-outline-medical">
                                            <i class="bi bi-chat-dots me-1"></i> Send Message
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Footer -->

        <footer class="footer mt-auto py-3">
        <div class="container">
            <div class="row g-3">
                <!-- Brand & Description -->
                <div class="col-lg-4 col-md-6">
                    <h5 class="mb-3">
                        <i class="bi bi-heart-pulse me-2 text-primary"></i>
                        <span id="footer-brand">Sahatak</span>
                    </h5>
                    <div class="d-flex gap-3 social-links">
                        <a href="https://facebook.com/sahatak" target="_blank" rel="noopener"><i class="bi bi-facebook fs-5"></i></a>
                        <a href="https://twitter.com/sahatak" target="_blank" rel="noopener"><i class="bi bi-twitter fs-5"></i></a>
                        <a href="https://instagram.com/sahatak" target="_blank" rel="noopener"><i class="bi bi-instagram fs-5"></i></a>
                        <a href="https://linkedin.com/company/sahatak" target="_blank" rel="noopener"><i class="bi bi-linkedin fs-5"></i></a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6">
                    <h6 class="mb-3" id="footer-links-title">Quick Links</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="../common/about.html" class="text-muted text-decoration-none" id="footer-about">About Platform</a>
                        </li>
                        <li class="mb-2">
                            <a href="../common/services.html" class="text-muted text-decoration-none" id="footer-services">Services</a>
                        </li>
                    </ul>
                </div>

                <!-- Support -->
                <div class="col-lg-3 col-md-6">
                    <h6 class="mb-3" id="footer-support-title">Support & Help</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="../common/support.html" class="text-muted text-decoration-none" id="footer-help">Help Center</a>
                        </li>
                        <li class="mb-2">
                            <a href="../common/contact-us.html" class="text-muted text-decoration-none" id="footer-contact">Contact Us</a>
                        </li>
                    </ul>
                </div>

                <!-- Emergency Contact -->
                <div class="col-lg-3 col-md-6 emergency-section">
                    <p class="mb-2 text-danger fw-bold" id="footer-emergency-text">
                        For medical emergencies
                    </p>
                    <p class="mb-3 text-danger fw-bold fs-6" id="footer-emergency-action">
                        <i class="bi bi-hospital me-2"></i>
                        Go to nearest ER hospital
                    </p>
                    <p class="mb-0 text-muted small" id="footer-emergency-note">
                        For non-urgent consultations use the platform
                    </p>
                </div>
            </div>

            <!-- Bottom Bar -->
            <hr class="my-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0 fw-bold" id="footer-copyright">
                        Â© 2025 Sahatak. All rights reserved.
                    </p>
                    <p class="mb-0 text-muted small mt-1" id="footer-medical-disclaimer">
                        This platform does not replace visiting a doctor in emergency cases
                    </p>
                </div>
            </div>
        </div>
    </footer>
                <script src="support.js"></script>
            <!-- Client-side handlers (no external submission) -->
                <script src="../../assets/js/main.js"></script>
                <script src="../../assets/js/components/auth-storage.js"></script>
                <script src="../../assets/js/components/auth-guard.js"></script>
                <script src="../../assets/js/components/validation.js"></script>
                <script src="support.js"></script>
</body>
</html>