<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title-head" data-i18n="about_page.title">About - Sahatak</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='%230d47a1' d='m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523.942-.661 2.27.067 3.71L8 15.5l6.533-8.737c.728-1.44.59-2.768.067-3.71C13.486.878 10.4.28 8.717 2.01L8 2.748z'/></svg>">
    
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Arabic Font - Noto Sans Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!-- Dashboard CSS -->
    <link rel="stylesheet" href="../../assets/css/components/dashboard.css">
    <!-- Appointments CSS -->
    <link rel="stylesheet" href="../../assets/css/components/appointments.css">
    <!-- Video Consultation Dashboard CSS -->
    <link rel="stylesheet" href="../../assets/css/components/video-consultation-dashboard.css">
    <!-- About Page CSS -->
    <link rel="stylesheet" href="../../assets/css/components/about.css">
    <!-- Translation Manager -->
    <script src="../../assets/js/components/translation-manager.js"></script>
    <!-- Include dashboard translations -->
    <script src="../../assets/js/components/dashboard-translations.js"></script>
    
</head>
<style>
     /* About page*/
                body {
                    background-color: #e6f7ff; /* light blue page background */
                }
                
                /* Keep main panels and cards white for readability */
                .card,
                .modal-content,
                .profile-section,
                .public-comment-card,
                .list-group-item,
                .dashboard-content,
                .about-section,
                .about-health {
                    background-color: #ffffff !important; /* white panels/fields */
                }

                /* Form controls and textareas explicitly white for contrast */
                .form-control,
                .form-select,
                textarea.form-control {
                    background-color: #ffffff !important;
                    border-color: #d9e9fb;
                    color: #062a43;
                }

                /* Footer readable (white) */
                footer {
                    background-color: rgba(255,255,255,0.98);
                    border-top: 1px solid rgba(13,71,161,0.06);
                }

                /* Subtle borders and rounded corners for panels */
                .card,
                .modal-content,
                .profile-section {
                    border: 1px solid rgba(13,71,161,0.08);
                    border-radius: 8px;
                    box-shadow: 0 1px 4px rgba(13,71,161,0.03);
                }

                /* Ensure readable text color on white/blue backgrounds */
                body, .card, .profile-section, .dashboard-header {
                    color: #062a43;
                }

                /* Links and small text adjustments for contrast */
                .card a, .list-group-item a {
                    color: #062a43;
                    text-decoration: underline;
                }
                .text-muted {
                    color: rgba(6,42,67,0.66) !important;
                }
</style>
            <body data-protect="patient">
    <div class="dashboard-container">
        <div class="container-fluid" style="padding-bottom: 120px;">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="row align-items-center">
                    <!-- Profile Section - Left (Right in RTL) -->
                    <div class="col-lg-4">
                        <div class="profile-section">
                        </div>
                    </div>
                    
                    <!-- Page Title - Center -->
                    <div class="col-lg-4 text-center">
                        <h1 class="dashboard-title" id="page-title" data-i18n="about_page.title">About Sahatak</h1>
                        <p class="dashboard-subtitle" id="page-subtitle" data-i18n="about_page.subtitle">About</p>
                    </div>
                     <!-- Controls - Right (Left in RTL) -->
                            <button id="langToggle" class="btn btn-outline-medical btn-sm">
                                <i class="bi bi-globe me-1"></i>
                                <span id="current-lang">English</span>
                            </button>
                        

                <!-- Introduction and audience-friendly summary -->
                <div class="card mb-4 intro-card">
                    <div class="card-body">
                        <h2 class="card-title" data-i18n="about_page.brief_title">Welcome to Sahatak — Healthcare made simple</h2>
                        <p class="card-text" data-i18n="about_page.brief">
                            Sahatak is designed for patients, caregivers, and families who want easy, reliable access to healthcare services.
                            Whether you need a same-day appointment, a video consultation from home, help managing a chronic condition, or a
                            quick answer about a medication — Sahatak brings tools and professionals together in one secure place.
                        </p>
                        <p class="card-text small text-muted">
                            This page explains the services we provide and how they help you manage care, save time, and stay informed.
                        </p>
                        <div id="api-info" class="mt-3" style="display:none;">
                            <div class="alert alert-info p-2 small mb-0">Loading platform info…</div>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- High-level services overview (audience-friendly explanations) -->
                <div class="services-overview mb-4">
                    <h3 data-i18n="about_page.overview_title">What Sahatak offers</h3>
                    <p class="text-muted mb-3" data-i18n="about_page.overview_subtitle">Short descriptions to help you understand each service and when to use it.</p>

                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-calendar-check-fill me-2 text-primary"></i><span data-i18n="about_page.services.appointments.title">Online Appointment Booking</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.appointments.text">
                                        Find available slots with general practitioners and specialists, choose in-person or video visits,
                                        and get confirmations and reminders so you never miss an appointment.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.appointments.hint">Use to schedule routine visits, follow-ups, or specialist consultations.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-camera-video-fill me-2 text-primary"></i><span data-i18n="about_page.services.video.title">Video Consultations</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.video.text">
                                        Secure, private video visits with qualified healthcare providers. Join from your dashboard — ideal for
                                        minor illnesses, follow-ups, medication reviews, and care when travel is difficult.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.video.hint">Use when physical exam isn't required or for quick clinical advice.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-folder2-open me-2 text-primary"></i><span data-i18n="about_page.services.records.title">Access to Medical Records</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.records.text">
                                        Securely view and manage your health records, test results, and visit notes. Share records with your doctor
                                        during consultations so care decisions are based on the full picture.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.records.hint">A single place for your health history, lab results, and imaging reports.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-prescription2 me-2 text-primary"></i><span data-i18n="about_page.services.prescription.title">Prescription Management</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.prescription.text">
                                        Request prescription renewals, receive digital prescriptions directly in your account, and get guidance
                                        from doctors about medication use and side effects.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.prescription.hint">Saves time on renewals and avoids unnecessary visits.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-beaker me-2 text-primary"></i><span data-i18n="about_page.services.lab.title">Lab & Imaging Booking</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.lab.text">
                                        Book laboratory tests and radiology (X‑ray, MRI) appointments at partnered centers. Results are uploaded to
                                        your records and can be reviewed with your clinician.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.lab.hint">Convenient scheduling and electronic delivery of results.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-heart-pulse me-2 text-primary"></i><span data-i18n="about_page.services.chronic.title">Chronic Disease Management</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.chronic.text">
                                        Tools and regular check-ins to help manage long-term conditions (diabetes, hypertension, asthma, etc.),
                                        including medication reminders, trend charts, and specialist care plans.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.chronic.hint">Personalized follow-up and easier coordination with care teams.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-people me-2 text-primary"></i><span data-i18n="about_page.services.family.title">Family Health Management</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.family.text">
                                        Manage health profiles for children, elderly relatives, or dependents from one account. Book appointments,
                                        view records, and receive reminders for multiple family members.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.family.hint">Makes household health coordination simpler and safer.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-journal-text me-2 text-primary"></i><span data-i18n="about_page.services.personalized.title">Personalized Health Content</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.personalized.text">
                                        Curated articles, tips, and educational resources tailored to your age, conditions, and interests so you can
                                        make informed day-to-day choices about your health.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.personalized.hint">AI recommends content relevant to your profile and goals.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-chat-dots-fill me-2 text-primary"></i><span data-i18n="about_page.services.chat.title">Secure Chat & 24/7 Support</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.chat.text">
                                        Use secure messaging to ask non-urgent clinical questions or get administrative help. For urgent triage, our
                                        24/7 support provides guidance on next steps and directs you to appropriate care.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.chat.hint">Not a replacement for emergency services — use ER for life‑threatening issues.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-box-seam me-2 text-primary"></i><span data-i18n="about_page.services.delivery.title">Medication Delivery</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.delivery.text">
                                        Get prescribed medicines delivered to your home. Track orders, view delivery status, and contact support if
                                        there are issues.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.delivery.hint">Convenient for those with mobility challenges or busy schedules.</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-shield-check me-2 text-primary"></i><span data-i18n="about_page.services.insurance.title">Insurance & Administrative Help</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.insurance.text">
                                        Assistance with insurance questions, claims guidance, and help submitting necessary documents to speed
                                        approvals for visits and tests.
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.insurance.hint">Support to reduce billing surprises and paperwork.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100 service-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-robot me-2 text-primary"></i><span data-i18n="about_page.services.ai.title">AI Healthcare Assistant</span></h5>
                                    <p class="card-text" data-i18n="about_page.services.ai.text">
                                        Your smart AI companion helps answer medical questions, suggest health tips, and guide you through managing your health conditions in real-time available
                                    </p>
                                    <small class="text-muted" data-i18n="about_page.services.ai.hint">artificial intelligence to make your healthcare experience smarter and.</small>
                                </div>
                            </div>
                        </div>

                    <p id="contact-description">
                        For any inquiries or support, please reach out to us at <a href="mailto:
                        Sahatak.sudan@gmail.com">support@sahatak.com</a>.
                                        <!-- Comments & Feedback -->
                                        <div class="public-comment-card card mt-4">
                                            <div class="card-body">
                                                <h5 class="card-title mb-2" data-i18n="about_page.public_comment.title">Public Comment</h5>
                                                <p class="small text-muted mb-3" data-i18n="about_page.public_comment.description">Share a quick public note — it will appear below with other feedback.</p>

                                                <form id="publicCommentForm" class="d-flex gap-2">
                                                    <textarea id="publicCommentText" class="form-control" rows="2" data-i18n-placeholder="about_page.public_comment.placeholder" placeholder="Write a short comment..." required></textarea>
                                                    <div class="d-flex flex-column">
                                                        <button id="publicCommentSend" class="btn btn-medical" type="submit" data-i18n="about_page.public_comment.send_button" title="Send comment">
                                                            <i class="bi bi-send"></i>
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>

                                        <script>
                                        (function () {
                                            const commentsKey = 'sahatak_comments_v1';
                                            const form = document.getElementById('publicCommentForm');
                                            const textEl = document.getElementById('publicCommentText');
                                            const list = document.getElementById('comments-list');

                                            function createCommentItem(c) {
                                                const item = document.createElement('div');
                                                item.className = 'list-group-item';
                                                item.innerHTML = '<div class="d-flex w-100 justify-content-between"><strong>' + (c.rating ? c.rating + ' • ' : '') + '</strong><small class="text-muted">' + new Date(c.time).toLocaleString() + '</small></div><p class="mb-1">' + c.text + '</p>';
                                                return item;
                                            }

                                            form.addEventListener('submit', function (e) {
                                                e.preventDefault();
                                                const text = (textEl.value || '').trim();
                                                if (!text) return;
                                                let data = [];
                                                try { data = JSON.parse(localStorage.getItem(commentsKey) || '[]'); } catch (err) { data = []; }
                                                const comment = { text: text, rating: '', time: Date.now() };
                                                data.push(comment);
                                                try { localStorage.setItem(commentsKey, JSON.stringify(data)); } catch (err) {}
                                                // Update visible list: show newly added comment at top
                                                if (list) {
                                                    // remove "no comments" placeholder if present
                                                    if (list.children.length === 1 && list.children[0].classList.contains('text-muted')) {
                                                        list.innerHTML = '';
                                                    }
                                                    const item = createCommentItem(comment);
                                                    list.insertBefore(item, list.firstChild);
                                                }
                                                textEl.value = '';
                                                textEl.blur();
                                            });
                                        })();
                                        </script>
                                        <!-- Modals -->

                                        <!-- Comment Modal -->
                                        <div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h5 class="modal-title" id="commentModalLabel">Add Comment</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                              </div>
                                              <div class="modal-body">
                                                <form id="commentForm">
                                                    <div class="mb-3">
                                                        <label for="commentText" class="form-label">Your comment</label>
                                                        <textarea id="commentText" class="form-control" rows="4" required></textarea>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="commentRating" class="form-label">Rating (optional)</label>
                                                        <select id="commentRating" class="form-select">
                                                            <option value="">No rating</option>
                                                            <option>5 - Excellent</option>
                                                            <option>4 - Good</option>
                                                            <option>3 - Fair</option>
                                                            <option>2 - Poor</option>
                                                            <option>1 - Very poor</option>
                                                        </select>
                                                    </div>
                                                    <div class="text-end">
                                                        <button type="submit" class="btn btn-medical">Submit</button>
                                                    </div>
                                                </form>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <!-- Language Selector Modal -->
                                        <div class="modal fade" id="langModal" tabindex="-1" aria-labelledby="langModalLabel" aria-hidden="true">
                                          <div class="modal-dialog modal-sm modal-dialog-centered">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h5 class="modal-title" id="langModalLabel">Select Language</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                              </div>
                                              <div class="modal-body">
                                                <div class="list-group">
                                                    <button class="list-group-item list-group-item-action lang-option" data-lang="en">English</button>
                                                    <button class="list-group-item list-group-item-action lang-option" data-lang="ar">العربية</button>
                                                    <button class="list-group-item list-group-item-action lang-option" data-lang="fr">Français</button>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <!-- Symptom Checker Modal (simple) -->
                                        <div class="modal fade" id="symptomModal" tabindex="-1" aria-labelledby="symptomModalLabel" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h5 class="modal-title" id="symptomModalLabel">Symptom Checker</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                              </div>
                                              <div class="modal-body">
                                                <form id="symptomForm">
                                                    <div class="mb-3">
                                                        <label for="symptomInput" class="form-label">Describe your main symptom</label>
                                                        <input id="symptomInput" class="form-control" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label class="form-label">Duration</label>
                                                        <input id="symptomDuration" class="form-control" placeholder="e.g. 3 days">
                                                    </div>
                                                    <div class="text-end">
                                                        <button class="btn btn-medical" type="submit">Get Suggestions</button>
                                                    </div>
                                                </form>
                                                <div id="symptomResult" class="mt-3" style="display:none;"></div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                    
                                        <!-- Footer -->

        <footer class="footer mt-auto py-3">
        <div class="container">
            <div class="row g-3">
                <!-- Brand & Description -->
                <div class="col-lg-4 col-md-6">
                    <h5 class="mb-3">
                        <i class="bi bi-heart-pulse me-2 text-primary"></i>
                        <span id="footer-brand">Sahatak</span>
                    </h5>
                    <div class="d-flex gap-3 social-links">
                        <a href="https://facebook.com/sahatak" target="_blank" rel="noopener"><i class="bi bi-facebook fs-5"></i></a>
                        <a href="https://twitter.com/sahatak" target="_blank" rel="noopener"><i class="bi bi-twitter fs-5"></i></a>
                        <a href="https://instagram.com/sahatak" target="_blank" rel="noopener"><i class="bi bi-instagram fs-5"></i></a>
                        <a href="https://linkedin.com/company/sahatak" target="_blank" rel="noopener"><i class="bi bi-linkedin fs-5"></i></a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6">
                    <h6 class="mb-3" id="footer-links-title">Quick Links</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="../common/about.html" class="text-muted text-decoration-none" id="footer-about">About Platform</a>
                        </li>
                        <li class="mb-2">
                            <a href="../common/services.html" class="text-muted text-decoration-none" id="footer-services">Services</a>
                        </li>
                    </ul>
                </div>

                <!-- Support -->
                <div class="col-lg-3 col-md-6">
                    <h6 class="mb-3" id="footer-support-title">Support & Help</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="../common/support.html" class="text-muted text-decoration-none" id="footer-help">Help Center</a>
                        </li>
                        <li class="mb-2">
                            <a href="mailto:Sahatak.sudan@gmail.com" class="text-muted text-decoration-none" id="footer-contact">Contact Us</a>
                        </li>
                    </ul>
                </div>

                <!-- Emergency Contact -->
                <div class="col-lg-3 col-md-6 emergency-section">
                    <p class="mb-2 text-danger fw-bold" id="footer-emergency-text">
                        For medical emergencies
                    </p>
                    <p class="mb-3 text-danger fw-bold fs-6" id="footer-emergency-action">
                        <i class="bi bi-hospital me-2"></i>
                        Go to nearest ER hospital
                    </p>
                    <p class="mb-0 text-muted small" id="footer-emergency-note">
                        For non-urgent consultations use the platform
                    </p>
                </div>
            </div>

            <!-- Bottom Bar -->
            <hr class="my-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0 fw-bold" id="footer-copyright">
                        © 2025 Sahatak. All rights reserved.
                    </p>
                    <p class="mb-0 text-muted small mt-1" id="footer-medical-disclaimer">
                        This platform does not replace visiting a doctor in emergency cases
                    </p>
                </div>
            </div>
        </div>
    </footer>
                            <script src="../../assets/js/main.js"></script>
                            
                                        <!-- Dashboard Translations -->
                        <script src="../../assets/js/components/dashboard-translations.js"></script>

                        <!-- About page: inline translation loader (loads ../../locales/{en|ar}/about.json) -->
                        <script>
                        (function(){
                            async function loadAboutTranslations(lang) {
                                const base = '../../locales/';
                                // Prefer per-language about.json under locales/{lang}/about.json
                                const candidates = [
                                    `${base}${lang}/about.json`,
                                    `${base}${lang}.json`,
                                    `${base}en/about.json` // fallback
                                ];

                                for (const url of candidates) {
                                    try {
                                        const res = await fetch(url);
                                        if (!res.ok) continue;
                                        const j = await res.json();
                                        return j;
                                    } catch (e) { /* try next */ }
                                }
                                return null;
                            }

                            function getByKey(obj, keyPath) {
                                if (!obj || !keyPath) return null;
                                const parts = keyPath.split('.');
                                let v = obj;
                                for (const p of parts) {
                                    if (v === undefined || v === null) return null;
                                    v = v[p];
                                }
                                return v;
                            }

                            async function applyAboutTranslations() {
                                const stored = localStorage.getItem('sahatak_language') || localStorage.getItem('language') || localStorage.getItem('language_preference') || 'en';
                                const lang = stored || 'en';
                                const translations = await loadAboutTranslations(lang);
                                if (!translations) return;

                                // Some translation files place service entries at top-level 'services'
                                // while HTML uses keys like 'about_page.services.*'. Normalize by
                                // copying top-level services under about_page.services when needed.
                                if (translations.services && translations.about_page && !translations.about_page.services) {
                                    translations.about_page.services = translations.services;
                                }

                                // Apply text nodes, with fallback for keys that may be located under top-level 'services'
                                document.querySelectorAll('[data-i18n]').forEach(el => {
                                    const key = el.getAttribute('data-i18n');
                                    let val = getByKey(translations, key);
                                    // If not found and key starts with 'about_page.services.', try without the 'about_page.' prefix
                                    if (!val && key && key.indexOf('about_page.services.') === 0) {
                                        const altKey = key.replace('about_page.', '');
                                        val = getByKey(translations, altKey);
                                    }
                                    if (val) el.textContent = val;
                                });

                                // Apply placeholders with similar fallback
                                document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                                    const key = el.getAttribute('data-i18n-placeholder');
                                    let val = getByKey(translations, key);
                                    if (!val && key && key.indexOf('about_page.services.') === 0) {
                                        const altKey = key.replace('about_page.', '');
                                        val = getByKey(translations, altKey);
                                    }
                                    if (val) el.setAttribute('placeholder', val);
                                });

                                // Update direction and font
                                const isRTL = lang === 'ar';
                                document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
                                document.body.style.fontFamily = isRTL ? "'Noto Sans Arabic', sans-serif" : "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";

                                // Update language toggle label if present
                                const langBtn = document.getElementById('current-lang');
                                if (langBtn) langBtn.textContent = isRTL ? 'العربية' : 'English';
                            }

                            document.addEventListener('DOMContentLoaded', function(){
                                // Run without blocking; allow other translation systems to co-exist
                                applyAboutTranslations().catch(err => console.error('About translations failed', err));
                            });
                        })();
                        </script>

                                    <script>
                                        // Translation helper functions for activities
                        function getActivityMessage(activityType, patientName) {
                            const currentLang = LanguageManager?.getLanguage() || 'ar';
                            const t = LanguageManager?.translations?.[currentLang];
                            
                            if (t?.dashboard?.doctor?.activities?.[activityType]) {
                                return t.dashboard.doctor.activities[activityType].replace('{patient_name}', patientName);
                            }
                            
                            // Fallback to English
                            const fallbacks = {
                                'appointment_scheduled': `New appointment scheduled with ${patientName}`,
                                'appointment_completed': `Consultation completed with ${patientName}`,
                                'appointment_cancelled': `Appointment cancelled with ${patientName}`,
                                'video_session_ended': `Video call ended with ${patientName}`
                            };
                            return fallbacks[activityType] || `Activity with ${patientName}`;
                        }
                        
                        function getTimeMessage(timeType, count = null) {
                            const currentLang = LanguageManager?.getLanguage() || 'en';
                            const t = LanguageManager?.translations?.[currentLang];
                            
                            if (t?.dashboard?.doctor?.activities?.time?.[timeType]) {
                                let message = t.dashboard.doctor.activities.time[timeType];
                                if (count !== null) {
                                    message = message.replace('{count}', count);
                                }
                                return message;
                            }
                            
                            // Fallback to English
                            const fallbacks = {
                                'just_now': 'Just now',
                                'minutes_ago': `${count} minutes ago`,
                                'hours_ago': `${count} hours ago`,
                                'days_ago': `${count} days ago`
                            };
                            return fallbacks[timeType] || '';
                        }

                    (function(){
                        // Remove duplicate feature cards/list items based on title text
                        try {
                            const seen = new Set();
                            document.querySelectorAll('#features-cards .card, #features-list .feature-card').forEach(card => {
                                const title = (card.querySelector('.card-title') || card.querySelector('h6') || {textContent:''}).textContent.trim();
                                if (!title) return;
                                if (seen.has(title)) card.remove(); else seen.add(title);
                            });
                        } catch (e) { /* non-fatal */ }

                        // Try fetching backend API info to show version/endpoints when available
                        const apiInfoEl = document.getElementById('api-info');
                        fetch('/api').then(r => r.json()).then(j => {
                            if (!j || !j.data) return;
                            const v = j.data.version || j.data.service || '';
                            const endpoints = j.data.endpoints ? Object.keys(j.data.endpoints) : [];
                            apiInfoEl.style.display = 'block';
                            apiInfoEl.innerHTML = `<div class="alert alert-info p-2 small mb-0">Platform API: <strong>${v}</strong> — Available modules: ${endpoints.join(', ')}</div>`;
                        }).catch(()=>{
                            // leave hidden if not reachable
                        });
                    })();
                    </script>

                    <script>
                    (function(){
                        // Consolidated About page translation wiring using global LanguageManager
                        function getTranslatedValue(key, lang) {
                            // Try primary key first
                            const primary = LanguageManager.translate(key, lang);
                            if (primary && primary !== key) return primary;

                            // If key starts with about_page.services., try without the about_page prefix
                            if (key && key.indexOf('about_page.services.') === 0) {
                                const alt = key.replace('about_page.', ''); // 'services.*'
                                const altVal = LanguageManager.translate(alt, lang);
                                if (altVal && altVal !== alt) return altVal;
                            }

                            // Also try removing only 'about_page.' prefix (covers public_comment vs about_page.public_comment)
                            if (key && key.indexOf('about_page.') === 0) {
                                const alt2 = key.replace('about_page.', '');
                                const alt2Val = LanguageManager.translate(alt2, lang);
                                if (alt2Val && alt2Val !== alt2) return alt2Val;
                            }

                            // Final fallback: return null to indicate not found
                            return null;
                        }

                        function applyAboutTranslations() {
                            const lang = LanguageManager.getLanguage() || localStorage.getItem('sahatak_language') || 'en';

                            // Apply text nodes
                            document.querySelectorAll('[data-i18n]').forEach(el => {
                                const key = el.getAttribute('data-i18n');
                                const text = getTranslatedValue(key, lang);
                                if (text) el.textContent = text;
                            });

                            // Apply placeholders
                            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                                const key = el.getAttribute('data-i18n-placeholder');
                                const text = getTranslatedValue(key, lang);
                                if (text) el.setAttribute('placeholder', text);
                            });

                            // Direction and font
                            const isRTL = lang === 'ar';
                            document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
                            document.body.style.fontFamily = isRTL ? "'Noto Sans Arabic', sans-serif" : "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";

                            // Update language label
                            const langBtn = document.getElementById('current-lang');
                            if (langBtn) langBtn.textContent = isRTL ? 'العربية' : 'English';

                            // Update head title if present
                            const headTitle = document.getElementById('page-title-head');
                            if (headTitle) {
                                const titleKey = headTitle.getAttribute('data-i18n');
                                if (titleKey) {
                                    const t = getTranslatedValue(titleKey, lang);
                                    if (t) headTitle.textContent = t;
                                }
                            }
                        }

                        // Run on load and on global language change
                        document.addEventListener('DOMContentLoaded', function(){
                            // Small delay to allow LanguageManager to finish loading translations if it started concurrently
                            setTimeout(applyAboutTranslations, 20);

                            window.addEventListener('languageChanged', function(e){
                                // languageChanged detail may contain {lang}
                                // Give LanguageManager a moment if it needs to finish applying
                                setTimeout(applyAboutTranslations, 10);
                            });

                            // Ensure the local toggle uses the global LanguageManager
                            const langToggle = document.getElementById('langToggle');
                            if (langToggle) {
                                langToggle.addEventListener('click', function(){
                                    const current = LanguageManager.getLanguage() || localStorage.getItem('sahatak_language') || 'en';
                                    const next = current === 'ar' ? 'en' : 'ar';
                                    LanguageManager.setLanguage(next);
                                    // Also apply shortly after as a fallback
                                    setTimeout(applyAboutTranslations, 60);
                                });
                            }
                        });
                    })();
                    </script>

